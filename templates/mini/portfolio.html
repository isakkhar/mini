{% extends 'mini/base.html' %}
{% load static %}
{% block title %}Portfolio{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-xl-10 col-lg-12 m-auto">
      <div class="text-center mt-70 mb-50">
        <h2 class="color-linear d-inline-block mb-20">{{ site_settings.portfolio_title|default:"My Latest Projects" }}</h2>
        <p class="text-lg color-gray-500">{{ site_settings.portfolio_description|default:"The convention is the main event of the year for professionals in the world of design and architecture." }}</p>
      </div>
      <div class="row text-center filter-nav">
        <div class="col-lg-12">
          <span class="btn btn-border-linear btn-filter hover-up" data-filter="">All</span>
          {% for category in portfolio_categories %}
            <span class="btn btn-border-linear btn-filter hover-up" data-filter="{{ category }}">{{ category }}</span>
          {% endfor %}
        </div>
      </div>
      <div class="mt-70">
        <div class="row">
          {% for project in projects %}
          <div class="col-lg-6 project mb-30" data-category="{{ project.category }}">
            <div class="portfolio-card hover-up wow animate__animated animate__fadeIn" style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid #334155; border-radius: 20px; overflow: hidden; height: 100%; display: flex; flex-direction: column; position: relative;">
              <div class="card-image-wrapper" style="position: relative; width: 100%; height: 300px; overflow: hidden;">
                <a href="{% url 'portfolio_detail' slug=project.slug %}">
                  {% if project.image %}
                    <img src="{{ project.image.url }}" alt="{{ project.title }}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease;">
                  {% else %}
                    <img src="{% static 'assets/imgs/template/ava.jpg' %}" alt="{{ project.title }}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease;">
                  {% endif %}
                </a>
                {% if project.category %}
                <div class="category-badge" style="position: absolute; top: 15px; left: 15px;">
                  <span style="background: rgba(14, 165, 234, 0.9); color: #fff; padding: 6px 14px; border-radius: 20px; font-size: 12px; font-weight: 500; backdrop-filter: blur(10px); display: inline-block;">
                    {{ project.category }}
                  </span>
                </div>
                {% endif %}
              </div>
              <div class="card-content" style="padding: 25px; flex-grow: 1; display: flex; flex-direction: column;">
                <a href="{% url 'portfolio_detail' slug=project.slug %}">
                  <h4 class="color-white mb-15" style="font-size: 20px; line-height: 1.4; min-height: 56px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-weight: 600;">
                    {{ project.title }}
                  </h4>
                </a>
                <p class="color-gray-500 text-sm mb-20" style="line-height: 1.6; min-height: 60px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; font-size: 14px;">
                  {{ project.description|striptags|truncatewords:20 }}
                </p>
                <div class="card-footer mt-auto" style="padding-top: 15px; border-top: 1px solid #334155;">
                  <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span class="color-gray-600 text-xs" style="font-size: 12px;">
                      <i class="fi-rr-calendar" style="margin-right: 5px;"></i>
                      {{ project.created|date:"d M Y" }}
                    </span>
                    <a href="{% url 'portfolio_detail' slug=project.slug %}" class="view-project-btn" style="color: #0ea5ea; font-size: 13px; font-weight: 500; text-decoration: none; display: flex; align-items: center; gap: 5px;">
                      View Details
                      <i class="fi-rr-arrow-small-right"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% empty %}
          <div class="col-12 text-center color-gray-500">No projects yet.</div>
          {% endfor %}
        </div>
      </div>
      
      <!-- Custom Portfolio Card Styles -->
      <style>
        .portfolio-card {
          transition: all 0.3s ease;
        }
        .portfolio-card:hover {
          transform: translateY(-5px);
          border-color: #0ea5ea !important;
          box-shadow: 0 10px 30px rgba(14, 165, 234, 0.2);
        }
        .portfolio-card:hover .card-image-wrapper img {
          transform: scale(1.05);
        }
        .view-project-btn:hover {
          color: #38bdf8 !important;
        }
      </style>
      <!-- You can add pagination and other sections as needed -->
    </div>
  </div>
</div>

<!-- My Services Section -->
<div class="text-center mt-70 mb-50">
  <h2 class="color-linear d-inline-block mb-20 wow animate__animated animate__fadeInUp">My Services</h2>
  <p class="text-lg color-gray-500 wow animate__animated animate__fadeInUp">
    With many years of experience in the field of Digital Marketing,<br class="d-none d-lg-block">
    I am confident to bring you many outstanding values.
  </p>
</div>
<div class="box-features bg-gray-850 border-gray-800">
  <div class="row">
    {% for service in services %}
      <div class="col-lg-4 col-md-6 mb-50 wow animate__animated animate__fadeIn" data-wow-delay="0.{{ forloop.counter0 }}s">
        <div class="card-style-1 hover-up mb-30" style="height: 240px;">
          <span class="item-icon bg-gray-950 {{ service.icon_class }}"></span>
          <h5 class="color-white mb-15">{{ service.title|linebreaksbr }}</h5>
          <p class="text-base color-gray-700">{{ service.description }}</p>
          <!-- <p class="color-gray-500 text-sm">{{ project.description|truncatewords:20 }}</p> -->

        </div>
      </div>
    {% endfor %}
  </div>
</div>

<!-- Testimonials Section -->
<div class="text-center mt-70 mb-50">
  <h2 class="color-linear d-inline-block mb-10 wow animate__animated animate__fadeInUp">Testimonials</h2>
  <p class="text-lg color-gray-500 wow animate__animated animate__fadeInUp">
    Nettracking is a B2B marketing software for telecommunications industry.
  </p>
</div>
<div class="box-testimonials mb-150 animate__fadeIn mb-100">
  <div class="box-swiper">
    <div class="swiper-container swiper-group-3">
      <div class="swiper-wrapper pt-5">
        {% for testimonial in testimonials %}
        <div class="swiper-slide">
          <div class="card-testimonials bg-gray-850 border-gray-800 hover-up">
            <div class="box-author mb-20">
              {% if testimonial.photo %}
                <img src="{{ testimonial.photo.url }}" alt="{{ testimonial.name }}">
              {% else %}
                <img src="{% static 'assets/imgs/template/ava.jpg' %}" alt="{{ testimonial.name }}">
              {% endif %}
              <div class="author-info">
                <h6 class="color-gray-700">{{ testimonial.name }}</h6>
                {% if testimonial.company %}
                  <span class="color-gray-700 text-sm">{{ testimonial.company }}</span>
                {% endif %}
              </div>
            </div>
            <div class="card-info">
              <p class="color-gray-500">{{ testimonial.content }}</p>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="swiper-buttons">
      <div class="swiper-button-prev swiper-button-prev-style-3"></div>
      <div class="swiper-button-next swiper-button-next-style-3"></div>
    </div>
  </div>
</div>

<!-- Partners Section -->
<div class="text-center mt-70 mb-50">
  <h2 class="color-linear d-inline-block mb-10 wow animate__animated animate__fadeInUp">Our Partners</h2>
  <p class="text-lg color-gray-500 wow animate__animated animate__fadeInUp">
    We are proud to collaborate with these amazing brands and organizations.
  </p>
</div>
<div class="list-logos mt-50 mb-30">
  <div class="container">
    <div class="row">
      <div class="swiper-container swiper-group-1">
        <div class="swiper-wrapper wow animate__animated animate__fadeIn">
          {% for partner in partners %}
            <div class="swiper-slide d-flex justify-content-center align-items-center">
              <a href="{{ partner.website|default:'#' }}" target="_blank" style="display:inline-block;">
                <div class="partner-logo-box">
                  {% if partner.logo %}
                    <img src="{{ partner.logo.url }}" alt="{{ partner.name }}">
                  {% else %}
                    <img src="{% static 'assets/imgs/template/ava.jpg' %}" alt="{{ partner.name }}">
                  {% endif %}
                </div>
              </a>
            </div>
          {% empty %}
            <div class="swiper-slide text-center color-gray-500">No partners yet.</div>
          {% endfor %}
        </div>
        <!-- Swiper Arrows -->
        <div class="swiper-button-prev swiper-button-prev-style-3"></div>
        <div class="swiper-button-next swiper-button-next-style-3"></div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

<script>
document.addEventListener('DOMContentLoaded', function() {
  if (window.Swiper) {
    new Swiper('.swiper-group-3', {
      slidesPerView: 2,
      spaceBetween: 30,
      loop: true,
      navigation: {
        nextEl: '.swiper-button-next-style-3',
        prevEl: '.swiper-button-prev-style-3',
      },
      autoplay: {
        delay: 3000, // 3 seconds per slide
        disableOnInteraction: false
      },
      breakpoints: {
        1200: { slidesPerView: 2 },
        768: { slidesPerView: 1 },
        0:   { slidesPerView: 1 }
      }
    });
  }
});
</script>